# 为桌面浏览器带来快捷划词栏功能
【🤖 AICG 声明】

脚本的大部分代码参考或使用了 Gemini 3 Pro Preview、ChatGPT、Kimi K2、Qwen3-Max 等 LLM 的输出结果。

【💡 非原创内容声明】

1. Icon 来自 allsvgicons.com 提供的 material-symbols:touch-triple。
2. 脚本的大部分代码参考或使用了 Gemini 3 Pro Preview、ChatGPT、Kimi K2、Qwen3-Max 等 LLM 的输出结果。
3. 快速粘贴网盘提取码功能参考了 greasyfork.org/zh-CN/scripts/445489-网盘链接识别、greasyfork.org/zh-CN/scripts/439266-网盘有效性检查、github.com/Magiclyan/panAI（forked from syhyz1990/panAI）等脚本。
4. 中文文本校正功能参考了 github.com/sparanoid/chinese-copywriting-guidelines 项目。

【🧑‍💻 社区贡献名单（主动帮助改进、推广、翻译本项目）】

暂无

---

## 这是什么？

https://github.com/user-attachments/assets/83e9ec57-d8df-476c-ba36-2f45f7cd75eb

这是一个油猴脚本（UserScript）。最初的目标是在 Chrome、Firefox 等原生浏览器中复刻 360 浏览器、Microsoft Edge 等魔改浏览器内建的划词栏功能，因为我不想每次复制文本都需要按一次鼠标右键或者 Ctrl+C 快捷键，于是借助 AI 写了一个简单的划词复制脚本，后来想法越来越多，最终用 AI 拼凑出了这款增强效率类油猴脚本。

选择用油猴脚本而不是用浏览器扩展实现这个项目，是因为油猴脚本支持一次编写多平台通用，且没有签名、编译等流程，开发和后续维护门槛远低于浏览器扩展。但代价是油猴脚本的权限更低，导致无法实现某些高级功能，欢迎感兴趣的大佬将该项目重新实现浏览器扩展。

## 如何安装

推荐前往 **Greasy Fork** 安装（已设置源代码自动同步🔄️）：[https://greasyfork.org/zh-CN/scripts/558720-pickit](https://greasyfork.org/zh-CN/scripts/558720-pickit)

用户脚本管理器推荐：Chromium 138+：[ScriptCat](https://docs.scriptcat.org/)；旧版 Chromium、Firefox：[Violentmonkey](https://violentmonkey.github.io/)、[ScriptCat（v0.16.x）](https://github.com/scriptscat/scriptcat/releases/tag/v0.16.11)。

## 基本特性

* UI 模仿 Apple Liquid Glass 风格
* 适配多语言（目前通过机器翻译支持了英语 en 和俄语 ru）
* 注重低内存占用
* 事件驱动，避免轮询等 CPU 密集型代码
* 默认情况下不对网页进行任何侵入式修改，且脚本运行在独立的沙盒中（依赖脚本管理器实现）避免污染网页
* 100% 离线运行
* 无混淆代码，无商业或恶意行为

## 已实现功能

|功能名称|具体内容|更新日志|
| :--------  | :-----  | :----:  |
|🖱️ 网页划词|弹出快捷复制、搜索栏。如果文本含超链接则弹出打开（新建标签页）按钮，如果是常见的网盘链接同时附带访问密码+用户开启了“闪电粘贴”，则跳转到新标签页后点击输入框可以快速粘贴密码。|2025.12.12-功能上线、2026.1.5-增加 UI 重绘设置项、2026.1.19-增加智能分配搜索引擎功能|
|⌨️ 输入框划词|弹出快捷复制、剪贴按钮。在中文环境下若匹配到内置规则时（例如中英文字符之间没有空格且没有被引号框住）弹出校对按钮。|2025.12.12-功能上线|
|⚡ 闪电粘贴|复制后，在任意标签页的输入框中点击直接弹出粘贴按钮。|2025.12.12-功能上线|
|🔓 超级取词|按住热键，可以临时移除网页通过 JS 或 CSS 对选中、复制、Ctrl+C 等操作的干扰，使被鼠标点击的密码暂时变成明文，可完整选取被折叠的文本，松开热键一切复原。|2025.12.12-功能上线|
|🔗 拖拽预览|拖拽任意超链接可打开小窗快速预览。|2025.12.12-功能上线|
|🚫 屏蔽网页自带划词条|干掉讨厌的网页自带的划词条。|2025.12.12-功能上线|

### To Do

|类型|事项|详情|优先级|
| :--------  | :--------  | :-----  | :----:  |
|👾 Bug|超级取词（Unlock Mode）在部分网站无法按预期工作|1、在 https://rehtt.com/ 中无法划取文本；2、无法划取部分元素中的文本|常驻|
|👾 Bug|超链接提取规则待完善|1、文本【天翼云盘：https://cloud.189.cn/t/3yqYreieuUFv(访问码:cpn0)】被识别成了链接【https://cloud.189.cn/t/3yqYreieuUFv(:cpn0】；2、文本【5日iPhone 历代壁纸https://www.aliyundrive.com/s/rxUp6HNpwP8点击链接保存,或者复制本段内容,打开「阿里云盘」APP ,无】被识别为了链接【https://www.aliyundrive.com/s/rxUp6HNpwP8,,「」APP】|高|
|👾 Bug|更换输入框划词-高亮按钮的 SVG 图标|需要更换成“荧光笔笔头”或者“画笔刷“的图案|高|
|👾 Bug|优化剪切按钮的逻辑|剪切逻辑在某些网页中无法正常删除选中的文字，例如markdown.lovejade.cn|中|
|👾 Bug|闪电粘贴无法触发能被网页捕获到的粘贴事件|修改粘贴逻辑以解决（例如百度翻译fanyi.baidu.com，粘贴文本后无法即时发起翻译）|中|
|👾 Bug|修复超级取词-完整选取被折叠的文本功能|该功能会造成某些文本显示位置发生错位，例如百度搜索结果页右侧栏中的“弹幕互动”|中|
|👾 Bug|解决反向选区按钮位置在页面 scroll/resize 后跳回正向选区按钮位置的问题|（同左）|中|
|👾 Bug|按钮在某些情况下无法触发刷新位置逻辑|例如GitHub编辑readme.md时|中|
|👾 Bug|按钮在某些网页中，当页面刷新或resize后彻底消失无法触发重绘，而且反向选区逻辑不生效|例如哔哩哔哩任意视频详情页的任意评论|中|
|🧩 Feature|优化网页划词-提取超链接识别规则|现有的识别规则太过宽泛（例如会把“abcd.efg”也识别成超链接），计划内置一个常见的顶级域名列表来解决|高|
|🧩 Feature|实现划词翻译功能|借助 Google Chrome 在138+ 开始提供的 Translator API 实现划词后纯离线零延迟翻译体验。自动跳过代码段、含超链接的文本和被英文双引号框住的文本。计划暂时只实现en→zh翻译|高|
|🧩 Feature|修复并启用“缓存已输入文本” 功能|可以进一步考虑是否可以升级为表单填充助手功能|中|
|🧩 Feature|实现划词分享功能|1、划词后弹出分享按钮，点击分享按钮就自动生成一个分享卡片（markdown格式），包括选中的文本、网页链接、Favicon（可选）、网页标题（可选）、生成时间（可选）、选中文本的上下文（可选）、“由pickkit生成...”提示（可选）等信息，并通过GM_download API将生成的md文件保存到本地2、支持与文本中转框功能联动，将多条文本合并在一个分享卡片中|中|
|🧩 Feature|根据时区判断默认搜索引擎|如果能读取到Asia/Shanghai或Asia/Urumqi就将默认搜索引擎设置为百度，否则就为Google|中|
|🧩 Feature|拖拽预览增加点击父窗口自动关闭子窗口（预览弹窗）功能|1、需要实现跨标签页和跨域通信，且避免轮询；2、需要适配有前置跳转页面的网页，打开这类网页时如果不做处理会使子窗口断开与父窗口的关联，导致点击父窗口无法关闭子窗口|中|
|🧩 Feature|实现文本中转框功能|默认显示为一个贴边悬浮缩略图，用户划词后可拖动丢进中转框内，中转框内有记录时默认展开显示，并且在所有标签页中都可见，用户可以将单条记录拖出来，也可以多选记录后按选择顺序进行换行拼接后复制或首尾拼接后复制，以此实现多条文本跨 Tab 流转体验|中|
|🧩 Feature|实现大爆炸功能|通过热键（默认 Tab 键）进入，在大爆炸模式下用户可以直接在页面中多选文本，同时创建一个独立的文本中转框用于实时记录|需等待文本中转框功能实现|
|🧩 Feature|实现一致性检查功能|该功能默认开启。1、监听到复制事件时将用户当前选中的文本与剪贴板中的数据进行比较，若不一致则通过GM_notification警告用户；2、检测到用户选中的文本包含隐藏的或屏幕外的元素时警告用户；3、在非原创内容声明中增加：参考自github.com/roedesh/copyguard，演示地址：https://codingcheats.io/copy/ 、https://ruud.je/always-double-check-what-you-copy-from-websites|中|
|🧩 Feature|光标移至pre:has(code)代码块内时，显示复制全部按钮|默认关闭|中|
|🧩 Feature|光标移至textarea/input/富文本编辑器内时，显示清空按钮|默认关闭|中|
|🧩 Feature|鼠标双击textarea/input/富文本编辑器时，粘贴剪贴板内容至上述控件中|粘贴行为模拟真实用户的逐字输入行为，包括按键事件和输入延迟|中|
|🧩 Feature|优化 UI 的Liquid Glass 效果|目前的 UI 是普通毛玻璃在左上角和右下角贴了一层伪反光模仿Liquid Glass，实际不是Liquid Glass|低|
|🧩 Feature|给闪电粘贴增加“粘贴并回车”按钮|点击输入框触发闪电粘贴时，在“粘贴”按钮右侧增加“粘贴并回车”按钮|低|
|🧩 Feature|让 Unlock Mode 能够解锁 Shadow DOM|需要避免全局遍历，防止脚本在节点数特别多的网页卡死|低|
|🧩 Feature|丰富输入框划词-校对功能的规则库|（同左）|低|
|🧩 Feature|输入框划词-新增换行按钮 | 当用户点击输入框中任意一行的末尾时，追加显示换行按钮，点击即可在此处换行|待定|
|🧩 Feature|支持放大查看图片|仿淘宝京东商品图片放大预览|待定|
|💡 Other|为项目创建 GitHub Page|（同左）|待定|
|💡 Other|优化代码逻辑、结构和可读性|（同左）|低|
|~~🧩 Feature~~|~~增加切换开关，允许用户1、当网页滚动或resize时使按钮消失，而不是重绘；2、当网页滚动或resize时，如果锚点仍在视口内就仍然重绘按钮，超出锚点不再重绘~~|~~（同左）~~|已完成|

---

我并不具备专业编程知识，维护这个项目比较消耗时间精力，所以对本项目的任何借鉴、修改、转载、发布均无需取得我的同意或许可，欢迎感兴趣的朋友参与改进或者接手开发本项目。❤️
